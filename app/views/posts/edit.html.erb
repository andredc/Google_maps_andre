<div data-role="header">
  <h1>Editing Post</h1>
   <%= link_to 'Home', posts_path , 'data-icon' => 'home' , 'class' => 'ui-btn-left'  %>

</div>
<div data-role="content">
  <%= render 'form' %>
</div>

<!--
<#%= link_to 'Show', @post %> |
<#%= link_to 'Back', posts_path %>
-->


<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDIAWj6dRK3iiTYm4q23Vbe-Ina6hSQfd0&sensor=false&language=it" type="text/javascript"></script>


<script type="text/javascript">

    // function initialize(){


    //     var mapOptions = {
    //  center: new google.maps.LatLng(-34.397, 150.644),
    //     zoom: 8 ,
    //   mapTypeId: google.maps.MapTypeId.ROADMAP

    //        };
    //      var map= new google.maps.Map(document.getElementById("map-canvas"),
    //            mapOptions);


    //}

    //    google.maps.event.addDomListener(window,'load',initialize);

    function codeAddress(){

        var mapOptions = {
            mapTypeId: google.maps.MapTypeId.ROADMAP }

        var address = "<%= @post.address %>";
         var geocoder = new google.maps.Geocoder();

        geocoder.geocode({'address': address}, function(result,status){
            if(status == google.maps.GeocoderStatus.OK){
                map.setCenter(result[0].geometry.location);
                map.setZoom(14);
                var marker = new google.maps.Marker({
                    map: map,
                    position: result[0].geometry.location
                 });

            }else{

                alert("geocode was not successful for the following reason : " + status )

            }

        });

        var map= new google.maps.Map(document.getElementById("map-canvas2"),
                mapOptions);

    }





    google.maps.event.addDomListener(window,'load',codeAddress);

</script>
<div id="map-canvas2" style="width:100%; height: 400px"></div>
<!--<div id="map-canvas" style="width:100%; height: 400px"></div>-->


